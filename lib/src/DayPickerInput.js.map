{"version":3,"sources":["../../src/DayPickerInput.js"],"names":["HIDE_TIMEOUT","getStateFromProps","props","month","value","m","format","isValid","toDate","dayPickerProps","initialMonth","Date","showOverlay","DayPickerInput","input","daypicker","clickedInside","clickTimeout","hideTimeout","hideAfterDayClick","hideOnDayClick","setTimeout","hideDayPicker","handleContainerMouseDown","handleClick","showDayPicker","onClick","e","persist","handleFocus","onFocus","handleBlur","setState","focus","onBlur","handleChange","target","onDayChange","onChange","undefined","day","modifiersObj","disabled","disabledDays","selected","selectedDays","modifiers","reduce","obj","modifier","newObj","handleOnKeyUp","keyCode","ESC","onKeyUp","handleDayClick","onDayClick","state","clearTimeout","selectedDay","classNames","overlayWrapper","overlay","el","inputProps","component","container","createElement","ref","renderOverlay","Component","propTypes","string","isRequired","object","bool","any","shape","func","defaultProps"],"mappings":"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","file":"DayPickerInput.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment'; // eslint-disable-line import/no-extraneous-dependencies\n\nimport DayPicker from './DayPicker';\nimport { getModifiersForDay } from './ModifiersUtils';\nimport keys from './keys';\n\nexport const HIDE_TIMEOUT = 100;\n\nfunction getStateFromProps(props) {\n  let month;\n  if (props.value) {\n    const m = moment(props.value, props.format, true);\n    if (m.isValid()) {\n      month = m.toDate();\n    }\n  } else {\n    month =\n      props.dayPickerProps.initialMonth ||\n      props.dayPickerProps.month ||\n      new Date();\n  }\n\n  return {\n    showOverlay: false,\n    value: props.value,\n    month,\n  };\n}\n\nexport default class DayPickerInput extends React.Component {\n  static propTypes = {\n    // eslint-disable-next-line react/no-unused-prop-types\n    value: PropTypes.string,\n\n    format: PropTypes.string.isRequired,\n    dayPickerProps: PropTypes.object,\n    hideOnDayClick: PropTypes.bool,\n    component: PropTypes.any,\n\n    classNames: PropTypes.shape({\n      container: PropTypes.string,\n      overlayWrapper: PropTypes.string,\n      overlay: PropTypes.string.isRequired,\n    }),\n\n    onDayChange: PropTypes.func,\n    onChange: PropTypes.func,\n    onClick: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    onKeyUp: PropTypes.func,\n  };\n\n  static defaultProps = {\n    dayPickerProps: {},\n    value: '',\n    format: 'L',\n    hideOnDayClick: true,\n    component: 'input',\n    classNames: {\n      container: 'DayPickerInput',\n      overlayWrapper: 'DayPickerInput-OverlayWrapper',\n      overlay: 'DayPickerInput-Overlay',\n    },\n  };\n\n  constructor(props) {\n    super(props);\n    /* istanbul ignore next */\n    // for the ignore above see: https://github.com/gotwarlost/istanbul/issues/690\n\n    this.state = getStateFromProps(props);\n  }\n\n  componentWillUnmount() {\n    /* istanbul ignore next */\n    clearTimeout(this.clickTimeout);\n    /* istanbul ignore next */\n    clearTimeout(this.hideTimeout);\n  }\n\n  input = null;\n  daypicker = null;\n  clickedInside = false;\n  clickTimeout = null;\n  hideTimeout = null;\n\n  showDayPicker() {\n    this.setState({\n      showOverlay: true,\n    });\n  }\n\n  hideDayPicker() {\n    this.setState({\n      showOverlay: false,\n    });\n  }\n\n  hideAfterDayClick = () => {\n    if (!this.props.hideOnDayClick) {\n      return;\n    }\n    this.hideTimeout = setTimeout(\n      () => this.hideDayPicker(),\n      HIDE_TIMEOUT // give a timeout to show the clicked day\n    );\n  };\n\n  handleContainerMouseDown = () => {\n    this.clickedInside = true;\n    // The input's onBlur method is called from a queue right after onMouseDown event.\n    // setTimeout adds another callback in the queue, but is called later than onBlur event\n    this.clickTimeout = setTimeout(() => {\n      this.clickedInside = false;\n    }, 0);\n  };\n\n  handleClick = e => {\n    this.showDayPicker();\n    if (this.props.onClick) {\n      e.persist();\n      this.props.onClick(e);\n    }\n  };\n\n  handleFocus = e => {\n    this.showDayPicker();\n    if (this.props.onFocus) {\n      e.persist();\n      this.props.onFocus(e);\n    }\n  };\n\n  handleBlur = e => {\n    this.setState({\n      showOverlay: this.clickedInside,\n    });\n\n    // Force input's focus if blur event was caused\n    // by clicking inside the overlay\n    if (this.clickedInside) {\n      this.input.focus();\n    }\n\n    if (this.props.onBlur) {\n      e.persist();\n      this.props.onBlur(e);\n    }\n  };\n\n  handleChange = e => {\n    const { value } = e.target;\n    const { format, dayPickerProps, onDayChange, onChange } = this.props;\n    const m = moment(value, format, true);\n\n    if (onChange) {\n      e.persist();\n      onChange(e);\n    }\n\n    if (!m.isValid()) {\n      this.setState({ value });\n      if (onDayChange) {\n        onDayChange(undefined, {});\n      }\n      return;\n    }\n\n    const day = m.toDate();\n    this.setState({ month: day, value });\n\n    if (onDayChange) {\n      const modifiersObj = {\n        disabled: dayPickerProps.disabledDays,\n        selected: dayPickerProps.selectedDays,\n        ...dayPickerProps.modifiers,\n      };\n      const modifiers = getModifiersForDay(\n        day,\n        modifiersObj\n      ).reduce((obj, modifier) => {\n        const newObj = { ...obj };\n        newObj[modifier] = true;\n        return newObj;\n      }, {});\n      this.props.onDayChange(m, modifiers);\n    }\n  };\n\n  handleOnKeyUp = e => {\n    this.setState({\n      showOverlay: e.keyCode !== keys.ESC,\n    });\n    if (this.props.onKeyUp) {\n      e.persist();\n      this.props.onKeyUp(e);\n    }\n  };\n\n  handleDayClick = (day, modifiers, e) => {\n    if (this.props.dayPickerProps.onDayClick) {\n      this.props.dayPickerProps.onDayClick(day, modifiers, e);\n    }\n\n    if (modifiers.disabled) {\n      // Do nothing if the day is disabled\n      return;\n    }\n    if (modifiers.selected) {\n      // Unselect the day\n      this.setState({ value: '' }, this.hideAfterDayClick);\n      if (this.props.onDayChange) {\n        this.props.onDayChange(undefined, modifiers);\n      }\n      return;\n    }\n\n    const m = moment(day);\n    this.setState(\n      { value: m.format(this.props.format), month: day },\n      this.hideAfterDayClick\n    );\n    if (this.props.onDayChange) {\n      this.props.onDayChange(m, modifiers);\n    }\n  };\n\n  renderOverlay() {\n    let selectedDay;\n    if (this.state.value) {\n      const m = moment(this.state.value, this.props.format, true);\n      if (m.isValid()) {\n        selectedDay = m.toDate();\n      }\n    }\n\n    return (\n      <div className={this.props.classNames.overlayWrapper}>\n        <div className={this.props.classNames.overlay}>\n          <DayPicker\n            ref={el => (this.daypicker = el)}\n            fixedWeeks\n            {...this.props.dayPickerProps}\n            month={this.state.month}\n            selectedDays={selectedDay}\n            onDayClick={this.handleDayClick}\n            numberOfMonths={1}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const inputProps = { ...this.props };\n    delete inputProps.component;\n    delete inputProps.dayPickerProps;\n    delete inputProps.format;\n    delete inputProps.hideOnDayClick;\n    delete inputProps.onDayChange;\n    delete inputProps.classNames;\n\n    return (\n      <div\n        className={this.props.classNames.container}\n        onMouseDown={this.handleContainerMouseDown}\n      >\n        {React.createElement(this.props.component, {\n          ref: el => (this.input = el),\n          ...inputProps,\n          value: this.state.value,\n          onChange: this.handleChange,\n          onFocus: this.handleFocus,\n          onBlur: this.handleBlur,\n          onKeyUp: this.handleOnKeyUp,\n          onClick: this.handleClick,\n        })}\n        {this.state.showOverlay && this.renderOverlay()}\n      </div>\n    );\n  }\n}\n"]}